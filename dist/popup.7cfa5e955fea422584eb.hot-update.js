webpackHotUpdate("popup",{

/***/ "./src/chrome/js/ui/popup.js":
/*!***********************************!*\
  !*** ./src/chrome/js/ui/popup.js ***!
  \***********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nvar getElementById = function getElementById(id) {\n  return document.getElementById(id);\n};\n\nvar statusImage = getElementById('statusImage');\nvar currentDomainHeader = getElementById('currentDomainHeader');\nvar footerTrackerOff = getElementById('footerTrackerOff');\nvar trackerOff = getElementById('trackerOff');\nvar isOriBlock = getElementById('isOriBlock');\nvar isNotOriBlock = getElementById('isNotOriBlock');\nvar isForbidden = getElementById('isForbidden');\nvar isNotForbidden = getElementById('isNotForbidden');\nvar footerTrackerOn = getElementById('footerTrackerOn');\nvar aboutOriButton = getElementById('aboutOriButton');\nvar textAboutOri = getElementById('textAboutOri');\nvar closeTextAboutOri = getElementById('closeTextAboutOri');\nvar btnAboutForbidden = getElementById('btnAboutForbidden');\nvar textAboutForbidden = getElementById('textAboutForbidden');\nvar closeTextAboutForbidden = getElementById('closeTextAboutForbidden');\nvar btnAboutNotForbidden = getElementById('btnAboutNotForbidden');\nvar textAboutNotForbidden = getElementById('textAboutNotForbidden');\nvar closeTextAboutNotForbidden = getElementById('closeTextAboutNotForbidden');\nvar btnAboutNotOri = getElementById('btnAboutNotOri');\nvar textAboutNotOri = getElementById('textAboutNotOri');\nvar closeTextAboutNotOri = getElementById('closeTextAboutNotOri');\nvar oriSiteInfo = getElementById('oriSiteInfo');\nvar advertisingBlocks = document.querySelectorAll('.buy-vpn');\nvar currentDomainBlocks = document.querySelectorAll('.current-domain');\nvar popupShowTimeout = 60;\nchrome.runtime.getBackgroundPage( /*#__PURE__*/function () {\n  var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(_ref) {\n    var bgModules, asynchrome, registry, _yield$asynchrome$sto, enableExtension, _yield$asynchrome$tab, _yield$asynchrome$tab2, currentURL, _getAppropriateURL, hostname, currentHostname, _yield$registry$domai, domainFound, _yield$registry$distr, distributorUrl, cooperationRefused, show;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            bgModules = _ref.censortracker;\n            asynchrome = bgModules.asynchrome, registry = bgModules.registry;\n            _context.next = 4;\n            return addExtensionControlListeners(bgModules);\n\n          case 4:\n            _context.next = 6;\n            return asynchrome.storage.local.get({\n              enableExtension: true\n            });\n\n          case 6:\n            _yield$asynchrome$sto = _context.sent;\n            enableExtension = _yield$asynchrome$sto.enableExtension;\n            _context.next = 10;\n            return asynchrome.tabs.query({\n              active: true,\n              lastFocusedWindow: true\n            });\n\n          case 10:\n            _yield$asynchrome$tab = _context.sent;\n            _yield$asynchrome$tab2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_yield$asynchrome$tab, 1);\n            currentURL = _yield$asynchrome$tab2[0].url;\n            _getAppropriateURL = getAppropriateURL(currentURL), hostname = _getAppropriateURL.hostname;\n            currentHostname = bgModules.extractHostnameFromUrl(hostname);\n            interpolateCurrentDomain(currentHostname);\n\n            if (!enableExtension) {\n              _context.next = 34;\n              break;\n            }\n\n            changeStatusImage('normal');\n            renderCurrentDomain(currentHostname);\n            footerTrackerOn.removeAttribute('hidden');\n            _context.next = 22;\n            return registry.domainsContains(currentHostname);\n\n          case 22:\n            _yield$registry$domai = _context.sent;\n            domainFound = _yield$registry$domai.domainFound;\n\n            if (domainFound) {\n              changeStatusImage('blocked');\n              isForbidden.removeAttribute('hidden');\n              isNotForbidden.remove();\n              showAdvertising();\n            } else {\n              isNotForbidden.removeAttribute('hidden');\n              isForbidden.remove();\n              changeStatusImage('normal');\n            }\n\n            _context.next = 27;\n            return registry.distributorsContains(currentHostname);\n\n          case 27:\n            _yield$registry$distr = _context.sent;\n            distributorUrl = _yield$registry$distr.url;\n            cooperationRefused = _yield$registry$distr.cooperationRefused;\n\n            if (distributorUrl) {\n              currentDomainHeader.classList.add('title-ori');\n              isOriBlock.removeAttribute('hidden');\n              isNotOriBlock.remove();\n\n              if (cooperationRefused) {\n                showCooperationRefusedMessage();\n              } else {\n                changeStatusImage('ori');\n                console.warn('Cooperation accepted!');\n              }\n            } else {\n              isNotOriBlock.removeAttribute('hidden');\n              isOriBlock.remove();\n              console.log('Match not found at all');\n            }\n\n            if (domainFound && distributorUrl) {\n              if (cooperationRefused === false) {\n                changeStatusImage('ori_blocked');\n              }\n            }\n\n            _context.next = 35;\n            break;\n\n          case 34:\n            hideControlElements();\n\n          case 35:\n            show = function show() {\n              document.documentElement.style.visibility = 'initial';\n            };\n\n            setTimeout(show, popupShowTimeout);\n\n          case 37:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}());\n\nvar addExtensionControlListeners = /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(_ref3) {\n    var settings, proxies, chromeListeners;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            settings = _ref3.settings, proxies = _ref3.proxies, chromeListeners = _ref3.chromeListeners;\n            document.addEventListener('click', function (event) {\n              if (event.target.matches('#enableExtension')) {\n                settings.enableExtension();\n                proxies.setProxy();\n                chromeListeners.add();\n                window.location.reload();\n              }\n\n              if (event.target.matches('#disableExtension')) {\n                proxies.removeProxy();\n                settings.disableExtension();\n                chromeListeners.remove();\n                window.location.reload();\n              }\n            });\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function addExtensionControlListeners(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar changeStatusImage = function changeStatusImage(imageName) {\n  var imageSrc = chrome.runtime.getURL(\"images/icons/512x512/\".concat(imageName, \".png\"));\n  statusImage.setAttribute('src', imageSrc);\n};\n\nvar showAdvertising = function showAdvertising() {\n  advertisingBlocks.forEach(function (ad) {\n    ad.style.removeProperty('display');\n  });\n};\n\nvar getAppropriateURL = function getAppropriateURL(currentURL) {\n  var popupURL = chrome.runtime.getURL('popup.html');\n\n  if (currentURL.startsWith(popupURL)) {\n    var currentURLParams = currentURL.split('?')[1];\n    var searchParams = new URLSearchParams(currentURLParams);\n    var encodedURL = searchParams.get('loadFor');\n    var loadForURL = window.atob(encodedURL);\n    return new URL(loadForURL);\n  }\n\n  return new URL(currentURL);\n};\n\nvar interpolateCurrentDomain = function interpolateCurrentDomain(domain) {\n  currentDomainBlocks.forEach(function (element) {\n    element.innerText = domain;\n  });\n};\n\nvar renderCurrentDomain = function renderCurrentDomain(_ref5) {\n  var length = _ref5.length;\n\n  if (length >= 22 && length < 25) {\n    currentDomainHeader.style.fontSize = '17px';\n  } else if (length >= 25) {\n    currentDomainHeader.style.fontSize = '15px';\n  }\n\n  currentDomainHeader.classList.add('title-normal');\n  currentDomainHeader.removeAttribute('hidden');\n};\n\nvar showCooperationRefusedMessage = function showCooperationRefusedMessage() {\n  oriSiteInfo.innerText = 'Сервис заявил, что они не передают трафик российским ' + 'государственным органам в автоматическом режиме.';\n  textAboutOri.classList.remove('text-warning');\n  textAboutOri.classList.add('text-normal');\n  currentDomainHeader.classList.remove('title-ori');\n  currentDomainHeader.classList.add('title-normal');\n};\n\nvar hideControlElements = function hideControlElements() {\n  changeStatusImage('disabled');\n  trackerOff.hidden = false;\n  footerTrackerOff.hidden = false;\n  isOriBlock.hidden = true;\n  isForbidden.hidden = true;\n  isNotOriBlock.hidden = true;\n  isNotForbidden.hidden = true;\n};\n\naboutOriButton.addEventListener('click', function () {\n  textAboutOri.style.display = 'block';\n  aboutOriButton.style.display = 'none';\n  hideForbiddenDetails();\n});\nbtnAboutNotOri.addEventListener('click', function () {\n  textAboutNotOri.style.display = 'block';\n  btnAboutNotOri.style.display = 'none';\n  hideForbiddenDetails();\n});\ncloseTextAboutNotOri.addEventListener('click', function () {\n  textAboutNotOri.style.display = 'none';\n  btnAboutNotOri.style.display = 'flex';\n});\ncloseTextAboutOri.addEventListener('click', function () {\n  textAboutOri.style.display = 'none';\n  aboutOriButton.style.display = 'flex';\n});\nbtnAboutForbidden.addEventListener('click', function () {\n  textAboutForbidden.style.display = 'block';\n  btnAboutForbidden.style.display = 'none';\n  hideOriDetails();\n});\nbtnAboutNotForbidden.addEventListener('click', function () {\n  textAboutNotForbidden.style.display = 'block';\n  btnAboutNotForbidden.style.display = 'none';\n  hideOriDetails();\n});\ncloseTextAboutForbidden.addEventListener('click', function () {\n  textAboutForbidden.style.display = 'none';\n  btnAboutForbidden.style.display = 'flex';\n});\ncloseTextAboutNotForbidden.addEventListener('click', function () {\n  textAboutNotForbidden.style.display = 'none';\n  btnAboutNotForbidden.style.display = 'flex';\n});\n\nvar hideOriDetails = function hideOriDetails() {\n  textAboutOri.style.display = 'none';\n  aboutOriButton.style.display = 'flex';\n  textAboutNotOri.style.display = 'none';\n  btnAboutNotOri.style.display = 'flex';\n};\n\nvar hideForbiddenDetails = function hideForbiddenDetails() {\n  textAboutForbidden.style.display = 'none';\n  btnAboutForbidden.style.display = 'flex';\n  textAboutNotForbidden.style.display = 'none';\n  btnAboutNotForbidden.style.display = 'flex';\n};\n\n//# sourceURL=webpack:///./src/chrome/js/ui/popup.js?");

/***/ })

})